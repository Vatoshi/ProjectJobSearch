<#import "profile-edit.ftlh" as layout>

<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/css/profile.css">
    <title>–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç <#if user.roleId==1> —Å–æ–∏—Å–∫–∞—Ç–µ–ª—è <#else> —Ä–∞–±–æ—Ç–æ–¥–∞—Ç–µ–ª—è </#if> </title>
</head>

<body>
    <div class="container">
        <div class="sidebar">
            <div class="profile-header">
                <img src="/image/${user.avatar}" alt="–§–æ—Ç–æ –ø—Ä–æ—Ñ–∏–ª—è" class="avatar">
                <h2 class="profile-name">${user.name}</h2>
                <div class="profile-age">–í–æ–∑—Ä–∞—Å—Ç: ${user.age}</div>
                <a href="/profile/edit" class="btn" id="edit-profile-btn">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>
            </div>
            <ul class="nav-menu">
                <li class="nav-item">
                    <a href="#" class="nav-link active" data-target="resumes">
                        <span class="nav-icon">üìÑ</span>
                        <span>–ú–æ–∏ <#if user.roleId==1> —Ä–µ–∑—é–º–µ <#else> –≤–∞–∫–∞–Ω—Å–∏–∏ </#if></span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" data-target="responses">
                        <span class="nav-icon">‚úâÔ∏è</span>
                        <span>–û—Ç–∫–ª–∏–∫–∏</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" data-target="create">
                        <span class="nav-icon">‚ûï</span>
                        <span>–°–æ–∑–¥–∞—Ç—å <#if user.roleId==1> —Ä–µ–∑—é–º–µ <#else> –≤–∞–∫–∞–Ω—Å–∏–∏ </#if></span>
                    </a>
                </li>
            </ul>
        </div>

        <div class="main-content" id="resumes">
            <h2 class="section-title"> –í–∞—à–∏ <#if user.roleId==1> —Ä–µ–∑—é–º–µ <#else> –≤–∞–∫–∞–Ω—Å–∏–∏ </#if> </h2>
            <ul class="resume-list">

                <#if user.roleId==1>
                <#if resumes?has_content>
                    <#list resumes as resume>
                <li class="resume-item">
                    <div class="resume-header">
                        <h3 class="resume-title">${resume.name}</h3>
                        <div class="resume-date">–î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è: ${resume.updated!}</div>
                    </div>
                    <div class="resume-actions">
                        <a href="#" class="btn action-btn">–û–±–Ω–æ–≤–∏—Ç—å</a>
                        <a href="#" class="btn btn-outline action-btn">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>
                    </div>
                </li>
                </#list>
                <#else>
                    <p>–ù–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç —É –≤–∞—Å –Ω–µ—Ç—É —Ä–µ–∑—é–º–µ</p>
                </#if>
                </#if>

                <#if user.roleId==2>
                    <#if vacancies?has_content>
                        <#list vacancies as vacancy>
                        <li class="resume-item">
                            <div class="resume-header">
                                <h3 class="resume-title">${vacancy.name}</h3>
                                <div class="resume-date">–î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è: ${vacancy.updated!}</div>
                            </div>
                            <div class="resume-actions">
                                <a href="#" class="btn action-btn">–û–±–Ω–æ–≤–∏—Ç—å</a>
                                <a href="#" class="btn btn-outline action-btn">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>
                            </div>
                        </li>
                        </#list>
                    <#else>
                        <p>–ù–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç —É –≤–∞—Å –Ω–µ—Ç—É –≤–∞–∫–∞–Ω—Å–∏–π</p>
                    </#if>
                </#if>


            </ul>
        </div>

        <div class="main-content" id="responses" style="display: none;">
            <h2 class="section-title">–û—Ç–∫–ª–∏–∫–∏</h2>
            <p>–ü–æ–∫–∞ –Ω–µ—Ç –æ—Ç–∫–ª–∏–∫–æ–≤.</p>
        </div>

        <div class="main-content" id="create" style="display: none;">
            <h2 class="section-title">–°–æ–∑–¥–∞—Ç—å —Ä–µ–∑—é–º–µ</h2>
            <p>–ó–¥–µ—Å—å –±—É–¥–µ—Ç —Ñ–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è —Ä–µ–∑—é–º–µ.</p>
        </div>

        <div class="main-content" id="edit-profile" style="display: none;">
            <@layout.layout/>
        </div>
    </div>

    <script>
        const navLinks = document.querySelectorAll('.nav-link');
        const contentSections = document.querySelectorAll('.main-content');

        navLinks.forEach(link => {
            link.addEventListener('click', function (e) {
                e.preventDefault();
                const target = this.getAttribute('data-target');

                navLinks.forEach(l => l.classList.remove('active'));
                this.classList.add('active');

                contentSections.forEach(section => section.style.display = 'none');
                document.getElementById(target).style.display = 'block';
            });
        });

        const editBtn = document.getElementById('edit-profile-btn');
        const editSection = document.getElementById('edit-profile');

        editBtn.addEventListener('click', (e) => {
            e.preventDefault();

            navLinks.forEach(link => link.classList.remove('active'));
            contentSections.forEach(section => section.style.display = 'none');
            editSection.style.display = 'block';
        });

    </script>

</body>

</html>
