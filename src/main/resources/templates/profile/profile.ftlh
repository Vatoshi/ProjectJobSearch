
<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/css/profile.css">
    <title>–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç <#if user.role.id==1> —Å–æ–∏—Å–∫–∞—Ç–µ–ª—è <#else> —Ä–∞–±–æ—Ç–æ–¥–∞—Ç–µ–ª—è </#if> </title>
</head>

<body>
    <div class="container">
        <div class="sidebar">
            <div class="profile-header">
                <img src="user/avatars/${user.avatar}" onerror="this.onerror=null; this.src='/image/Default.png'" alt="–§–æ—Ç–æ –ø—Ä–æ—Ñ–∏–ª—è" class="avatar">
                <h2 class="profile-name">${user.name}</h2>
                <div class="profile-age">–í–æ–∑—Ä–∞—Å—Ç: ${user.age}</div>
                <a href="/profile/edit" class="btn" id="edit-profile-btn">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>
            </div>
            <ul class="nav-menu">
                <li class="nav-item">
                    <a href="#" class="nav-link active" data-target="resumes">
                        <span class="nav-icon">üìÑ</span>
                        <span>–ú–æ–∏ <#if user.role.id==1> —Ä–µ–∑—é–º–µ <#else> –≤–∞–∫–∞–Ω—Å–∏–∏ </#if></span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="/profile/response" class="nav-link" data-target="responses">
                        <span class="nav-icon">‚úâÔ∏è</span>
                        <span>–û—Ç–∫–ª–∏–∫–∏</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a <#if user.role.id == 1> href="/profile/create-resume" <#else> href="/profile/create-vacancy" </#if> class="nav-link" data-target="create">
                        <span class="nav-icon">‚ûï</span>
                        <span>–°–æ–∑–¥–∞—Ç—å <#if user.role.id==1> —Ä–µ–∑—é–º–µ <#else> –≤–∞–∫–∞–Ω—Å–∏—é </#if></span>
                    </a>
                </li>
                <#if user.role.id == 2>
                <li class="nav-item">
                    <a href="/resumes" class="nav-link">
                        <span class="nav-icon">üìå</span>
                        <span> –î–æ—Å—Ç—É–ø–Ω—ã–µ —Ä–µ–∑—é–º–µ </span>
                    </a>
                </li>
                </#if>
                <li class="nav-item">
                    <a href="/vacancies" class="nav-link" data-target="resumes">
                        <span class="nav-icon">üîÑ</span>
                        <span> –ö –≤–∞–∫–∞–Ω—Å–∏—è–º </span>
                    </a>
                </li>
            </ul>
        </div>

        <div class="main-content" id="resumes">
            <h2 class="section-title"> –í–∞—à–∏ <#if user.role.id==1> —Ä–µ–∑—é–º–µ <#else> –≤–∞–∫–∞–Ω—Å–∏–∏ </#if> </h2>
            <ul class="resume-list">

                <#if user.role.id==1>
                <#if user.resumes?has_content>
                <#if (resumePages != 1)>
                    <div class="pagination">
                        <#if (currentPage != 0)>
                            <a href="?page=${currentPage - 1}" class="page-link">${currentPage}</a>
                        </#if>

                        <a href="?page=${currentPage}" class="page-link active">${currentPage + 1}</a>

                        <#if (currentPage - 1 <= resumePages)>
                            <a href="?page=${currentPage + 1}" class="page-link">${currentPage + 2}</a>
                        </#if>
                    </div>
                </#if>
                    <#list user.resumes as resume>
                <li class="resume-item">
                    <div class="resume-header">
                        <h3 class="resume-title">${resume.name}</h3>
                        <div class="resume-date">–î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è: ${resume.updateTime!}</div>
                    </div>
                    <div class="resume-actions">
                        <form id="updateTimeResume${resume.id}" method="get" action="/profile/update-resume-time">
                            <input type="hidden" name="id" value="${resume.id}">
                        </form>
                        <button form="updateTimeResume${resume.id}" type="submit" class="btn action-btn">–û–±–Ω–æ–≤–∏—Ç—å</button>
                        <a href="/profile/edit-resume?id=${resume.id}"  class="btn btn-outline action-btn">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>
                    </div>
                </li>
                </#list>
                <#else>
                    <p>–ù–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç —É –≤–∞—Å –Ω–µ—Ç—É —Ä–µ–∑—é–º–µ</p>
                </#if>
                </#if>

                <#if user.role.id==2>
                    <#if user.vacancies?has_content>

                        <#if (vacancyPages !=0)>
                        <div class="pagination">
                            <#if (currentPage != 0)>
                                <a href="?page=${currentPage - 1}" class="page-link">${currentPage}</a>
                            </#if>

                            <a href="?page=${currentPage}" class="page-link active">${currentPage + 1}</a>

                            <#if (currentPage - 1 <= vacancyPages)>
                                <a href="?page=${currentPage + 1}" class="page-link">${currentPage + 2}</a>
                            </#if>
                        </div>
                        </#if>

                        <#list user.vacancies as vacancy>
                        <li class="resume-item">
                            <div class="resume-header">
                                <h3 class="resume-title">${vacancy.name}</h3>
                                <div class="resume-date">–î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è: ${vacancy.updateTime!}</div>
                            </div>
                            <div class="resume-actions">
                                <form id="updateTime${vacancy.id}" method="get" action="/profile/update-vacancy-time">
                                    <input type="hidden" name="id" value="${vacancy.id}">
                                </form>
                                <button form="updateTime${vacancy.id}" type="submit" class="btn action-btn">–û–±–Ω–æ–≤–∏—Ç—å</button>
                                <a href="/profile/edit-vacancy?id=${vacancy.id}" class="btn btn-outline action-btn">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>
                            </div>
                        </li>
                        </#list>
                    <#else>
                        <p>–ù–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç —É –≤–∞—Å –Ω–µ—Ç—É –≤–∞–∫–∞–Ω—Å–∏–π</p>
                    </#if>
                </#if>


            </ul>
        </div>
    </div>
</body>

</html>
